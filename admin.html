<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة الإدارة | Tech Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap'); body { font-family: 'Cairo', sans-serif; }</style>
</head>
<body class="bg-gray-100 min-h-screen">

<div id="login-screen" class="flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded-2xl shadow-xl w-80 text-center">
        <h2 class="text-2xl font-black mb-4 text-slate-800">دخول الإدارة</h2>
        <input type="password" id="pass" placeholder="رمز الدخول" class="w-full border-2 p-3 rounded-xl mb-4 outline-none focus:border-yellow-500">
        <button onclick="login()" class="w-full bg-black text-white py-3 rounded-xl font-bold">دخول</button>
    </div>
</div>

<div id="admin-content" class="hidden">
    <nav class="bg-slate-900 text-white p-4 flex justify-between items-center shadow-lg">
        <h1 class="text-xl font-black">إدارة Tech Store</h1>
        <button onclick="location.reload()" class="bg-red-500 px-4 py-2 rounded-lg text-sm">خروج</button>
    </nav>

    <div class="container mx-auto p-4 lg:p-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="bg-white p-6 rounded-2xl shadow-md border-t-4 border-yellow-500">
            <h2 class="text-xl font-bold mb-6">إضافة منتج جديد</h2>
            <form id="add-form" onsubmit="addProduct(event)" class="space-y-4">
                <input required id="name" placeholder="اسم المنتج" class="w-full border p-3 rounded-xl">
                <input required id="price" type="number" placeholder="السعر" class="w-full border p-3 rounded-xl">
                <div class="border-2 border-dashed p-4 rounded-xl text-center">
                    <p class="text-sm mb-2 text-gray-500">ارفع صورة المنتج من تليفونك:</p>
                    <input type="file" id="img-file" accept="image/*" class="w-full">
                </div>
                <button class="w-full bg-yellow-500 text-black font-black py-4 rounded-xl shadow-lg">نشر في المتجر</button>
            </form>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-md overflow-x-auto">
            <h2 class="text-xl font-bold mb-6">أحدث الأوردرات</h2>
            <table class="w-full text-right text-sm">
                <thead><tr class="bg-gray-50 border-b"><th class="p-3 text-slate-500">العميل</th><th class="p-3 text-slate-500">الأوردر</th><th class="p-3 text-slate-500">إجراء</th></tr></thead>
                <tbody id="orders-list"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    function login() {
        if(document.getElementById('pass').value === "112211") {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('admin-content').classList.remove('hidden');
            renderOrders();
        } else { alert('الباسورد غلط!'); }
    }

    let currentImg = "";
    document.getElementById('img-file').onchange = function(e) {
        const reader = new FileReader();
        reader.onload = () => currentImg = reader.result;
        reader.readAsDataURL(e.target.files[0]);
    };

    function addProduct(e) {
        e.preventDefault();
        if(!currentImg) return alert('فين صورة المنتج؟');
        const products = JSON.parse(localStorage.getItem('tech_products')) || [];
        products.push({
            id: Date.now(),
            name: document.getElementById('name').value,
            price: parseFloat(document.getElementById('price').value),
            img: currentImg
        });
        localStorage.setItem('tech_products', JSON.stringify(products));
        alert('تمت الإضافة بنجاح!');
        e.target.reset(); currentImg = "";
    }

    function renderOrders() {
        const orders = JSON.parse(localStorage.getItem('tech_orders')) || [];
        document.getElementById('orders-list').innerHTML = orders.map(o => `
            <tr class="border-b">
                <td class="p-3"><b>${o.name}</b><br><span class="text-green-600 font-bold">${o.phone}</span></td>
                <td class="p-3 text-xs">${o.items}<br><b class="text-sm">${o.total} ج.م</b></td>
                <td class="p-3"><button onclick="deleteOrder(${o.id})" class="text-red-500">حذف</button></td>
            </tr>
        `).join('');
    }

    function deleteOrder(id) {
        let orders = JSON.parse(localStorage.getItem('tech_orders')) || [];
        orders = orders.filter(o => o.id !== id);
        localStorage.setItem('tech_orders', JSON.stringify(orders));
        renderOrders();
    }
</script>
</body>
</html>
